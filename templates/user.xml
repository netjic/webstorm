<templateSet group="user">
  <template name="respsc" value="response.setContentType(&quot;text/html; charset=utf-8&quot;); html&#10;.setContentType(&quot;text/plain; charset=utf-8&quot;); 文本" shortcut="ENTER" description="response.setContentType(&quot;text/html; charset=utf-8&quot;); html .setContentType(&quot;text/plain; charset=utf-8&quot;); 文本" toReformat="false" toShortenFQNames="true">
    <context>
      <option name="JAVA_CODE" value="true" />
    </context>
  </template>
  <template name="/**" value="/**&#10; * @Description:&#10; * @Param:&#10; * @return:&#10; */" shortcut="ENTER" description="" toReformat="false" toShortenFQNames="true">
    <context>
      <option name="JAVA_CODE" value="true" />
    </context>
  </template>
  <template name="apcheup" value="public Map&lt;String, String&gt; asd(HttpServletRequest req ,HttpServletResponse resp){&#10;        try {&#10;            req.setCharacterEncoding(&quot;utf-8&quot;);&#10;        } catch (UnsupportedEncodingException e) {&#10;            e.printStackTrace();&#10;        }&#10;        //为基于磁盘的文件项创建工厂&#10;        DiskFileItemFactory factory = new DiskFileItemFactory();&#10;        //配置存储库（以确保使用安全的临时位置）&#10;        ServletContext ServletContext = req.getServletContext();&#10;        File repository = (File) req.getServletContext().getAttribute(&quot;javax.servlet.context.tempdir&quot;);&#10;        factory.setRepository(repository);&#10;        //创建一个新的文件上传处理程序&#10;        ServletFileUpload upload = new ServletFileUpload(factory);&#10;        //upload.setHeaderEncoding(&quot;UTF-8&quot;);&#10;        //解析请求&#10;        List&lt;FileItem&gt; items = null;&#10;        try {&#10;            items = upload.parseRequest(req);&#10;        } catch (FileUploadException e) {&#10;            e.printStackTrace();&#10;        }&#10;&#10;        Calendar calendar = Calendar.getInstance();&#10;        Date date = calendar.getTime();&#10;        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);&#10;&#10;&#10;        String path = req.getServletContext().getRealPath(&quot;/upload/&quot; + sdf.format(date));&#10;&#10;        File file = new File(path);&#10;        if (!file.exists()) {&#10;        } else {&#10;            file.mkdirs();&#10;        }&#10;&#10;        HashMap&lt;String, String&gt; hm = new HashMap&lt;&gt;();&#10;        Iterator&lt;FileItem&gt; iter = items.iterator();&#10;        while (iter.hasNext()) {&#10;            FileItem item = iter.next();&#10;            if (item.isFormField()) {&#10;                //是普通的表单&#10;                //字符串名称= item.getFieldName();&#10;                //字符串值= item.getString();&#10;                String value = null;&#10;                try {&#10;                    //处理中文乱码&#10;                    value = item.getString(&quot;UTF-8&quot;);&#10;                } catch (UnsupportedEncodingException e) {&#10;                    e.printStackTrace();&#10;                }&#10;                String key = item.getFieldName();&#10;                hm.put(key, value);&#10;            } else {&#10;                String ext=null;&#10;                if(item.getSize()&lt;1){&#10;                    hm.put(&quot;picurl&quot;,&quot;&quot;);&#10;                }else {&#10;                    String name = item.getName();&#10;                    ext = item.getName().substring(name.lastIndexOf(&quot;.&quot;));&#10;                    String uuid = UUID.randomUUID().toString();&#10;                    String zpath = path + &quot;/&quot; + uuid + ext;&#10;                    try {&#10;                        item.write(new File(zpath));&#10;                    } catch (Exception e) {&#10;                        e.printStackTrace();&#10;                    }&#10;                    hm.put(&quot;picurl&quot;, &quot;/upload/&quot; + sdf.format(date)+&quot;/&quot;+uuid+ext);&#10;                }&#10;&#10;            }&#10;        }&#10;        return hm;&#10;    }&#10;" shortcut="ENTER" description="apcheupload" toReformat="false" toShortenFQNames="true">
    <context>
      <option name="JAVA_CODE" value="true" />
    </context>
  </template>
</templateSet>